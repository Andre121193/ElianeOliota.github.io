<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>APP</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/css/materialize.min.css'>
  <link rel='stylesheet' href='https://cdn.materialdesignicons.com/1.1.34/'>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

  <link rel="stylesheet" href="./style.css">

</head> 

  <body>
    <div id="login-page" class="row">
      <div class="col s12 z-depth-6 card-panel">
        <form class="login-form">
          <div class="row">
          </div>
          <div class="row">
            <div class="input-field col s12">
              <i class="material-icons prefix">mail_outline</i>
              <input class="validate" id="email" type="email">
              <label for="email" data-error="informe um email válido" data-success="right">Email</label>
            </div>
          </div>
          <div class="row">
            <div class="input-field col s12">
              <i class="material-icons prefix">lock_outline</i>
              <input id="password" type="password">
              <label for="password">Senha</label>
            </div>
          </div>
         
          <div class="row">
            <div class="input-field col s12">
              <a href="#" id="login" class="btn waves-effect waves-light col s12">Entrar</a>
            </div>
          </div>
          <div class="row">
            <div class="input-field col s6 m6 l6">
              <p class="margin medium-small"><a href="/registrar.html">Registrar!</a></p>
            </div>
            <div class="input-field col s6 m6 l6">
              <p class="margin right-align medium-small"><a href="/projeto.html">Detalhes do projeto</a></p>
            </div>
          </div>

        </form>
      </div>
    </div>
  </body> 
  <script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular.min.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/js/materialize.min.js'></script>

  <script>


    $("#login").on(
      'click',
      () => {
        let logins = JSON.parse(localStorage.getItem('logins'))
        if (logins == null)
          logins = []
        let usuario = {
          email: $("#email").val(),
          password: $("#password").val()
        }
        window.location = "/principal.html"
        return
        
        if (!usuario.email && !usuario.password) {
          alert("Informe todos os dados")
          return;
        }
        let encontrado=false;
        logins.forEach(login => {
          if (login.email == usuario.email && login.password == usuario.password){
            encontrado=true
            localStorage.setItem("usuario", JSON.stringify(usuario))
            window.location = "/principal.html"

          }
        });

        if(!encontrado)
        {
          alert("Usuário não localizado, verifique as informações e tente novamente")
        }

        console.log(logins);


      }
    );


  </script>

</body>

</html>